<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Value Semantics &#8212; simple_app_state 2026 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=27fed22d" />
    <script src="../_static/documentation_options.js?v=fc6fd62b"></script>
    <script src="../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Batch Updates" href="batch_updates.html" />
    <link rel="prev" title="StateSlot" href="state_slot.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="value-semantics">
<h1>Value Semantics<a class="headerlink" href="#value-semantics" title="Link to this heading">¶</a></h1>
<p>SimpleAppState uses <strong>value semantics</strong> for all application state.</p>
<p>This means:</p>
<p><strong>State is treated as values, not as mutable objects.</strong></p>
<p>You do not change state by modifying objects.
You change state by <em>replacing values</em>.</p>
<p>This page explains what value semantics means in practice
and why SimpleAppState is designed this way.</p>
<hr class="docutils" />
<section id="the-most-important-rule">
<h2>The most important rule<a class="headerlink" href="#the-most-important-rule" title="Link to this heading">¶</a></h2>
<p>If you remember only one rule, remember this:</p>
<p><strong>Changing an object returned from get() never changes state.</strong></p>
<p>Example:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">logs</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
<span class="n">list</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;new entry&#39;</span><span class="p">);</span><span class="w"> </span><span class="c1">// ❌ state is NOT updated</span>
</pre></div>
</div>
<p>This is not a bug.
It is the core design.</p>
</section>
<hr class="docutils" />
<section id="why-get-returns-a-copy">
<h2>Why get() returns a copy<a class="headerlink" href="#why-get-returns-a-copy" title="Link to this heading">¶</a></h2>
<p>When you call <strong>get()</strong>:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">slot</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
</pre></div>
</div>
<p>the returned object is always a <strong>deep copy</strong>.</p>
<p>This prevents accidental changes such as:</p>
<ul class="simple">
<li><p>modifying a list</p></li>
<li><p>editing a map</p></li>
<li><p>changing fields inside an object</p></li>
</ul>
<p>Without this rule, state could change <em>silently</em>,
without SimpleAppState noticing.</p>
<p>Silent changes are dangerous because:</p>
<ul class="simple">
<li><p>widgets may not rebuild</p></li>
<li><p>undo / redo becomes unreliable</p></li>
<li><p>bugs become very hard to track</p></li>
</ul>
<p>Returning a copy makes all state changes explicit.</p>
</section>
<hr class="docutils" />
<section id="how-state-should-be-updated">
<h2>How state should be updated<a class="headerlink" href="#how-state-should-be-updated" title="Link to this heading">¶</a></h2>
<p>To change state, you must use <strong>set</strong> or <strong>update</strong>.</p>
<p>Example with <strong>set</strong>:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span>
<span class="w">  </span><span class="n">AppSettings</span><span class="p">(</span><span class="nl">theme:</span><span class="w"> </span><span class="s1">&#39;dark&#39;</span><span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Example with <strong>update</strong>:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">logs</span><span class="p">.</span><span class="n">update</span><span class="p">((</span><span class="n">oldCopy</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">oldCopy</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s1">&#39;new entry&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">oldCopy</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>In both cases:</p>
<ul class="simple">
<li><p>a <strong>new value</strong> is created</p></li>
<li><p>the old value is replaced</p></li>
<li><p>SimpleAppState is notified of the change</p></li>
</ul>
<p>This is the only way state can change.</p>
</section>
<hr class="docutils" />
<section id="thinking-in-before-and-after">
<h2>Thinking in “before” and “after”<a class="headerlink" href="#thinking-in-before-and-after" title="Link to this heading">¶</a></h2>
<p>Value semantics encourages a simple mental model:</p>
<ul class="simple">
<li><p>there is a <strong>previous value</strong></p></li>
<li><p>you create a <strong>next value</strong></p></li>
<li><p>the old one is discarded</p></li>
</ul>
<p>You never think about:</p>
<ul class="simple">
<li><p>“Who else is holding this object?”</p></li>
<li><p>“What happens if I mutate this list?”</p></li>
</ul>
<p>Each update is a clear state transition.</p>
<p>This model is easy to reason about,
especially for beginners.</p>
</section>
<hr class="docutils" />
<section id="why-this-matters-for-widgets">
<h2>Why this matters for widgets<a class="headerlink" href="#why-this-matters-for-widgets" title="Link to this heading">¶</a></h2>
<p>Widgets rebuild when state changes.</p>
<p>If state could be mutated silently:</p>
<ul class="simple">
<li><p>rebuilds might not happen</p></li>
<li><p>UI could become inconsistent</p></li>
</ul>
<p>Because SimpleAppState controls all writes:</p>
<ul class="simple">
<li><p>it always knows when a value changes</p></li>
<li><p>it knows exactly which slot changed</p></li>
<li><p>it can rebuild only the affected widgets</p></li>
</ul>
<p>This is why rebuild behavior is predictable.</p>
</section>
<hr class="docutils" />
<section id="value-semantics-and-undo-redo">
<h2>Value semantics and undo / redo<a class="headerlink" href="#value-semantics-and-undo-redo" title="Link to this heading">¶</a></h2>
<p>Undo and redo work by storing <strong>snapshots</strong> of state.</p>
<p>With value semantics:</p>
<ul class="simple">
<li><p>each snapshot is a clean copy</p></li>
<li><p>no snapshot shares mutable objects</p></li>
<li><p>restoring a snapshot is safe</p></li>
</ul>
<p>This makes features like:</p>
<ul class="simple">
<li><p>undo / redo</p></li>
<li><p>persistence</p></li>
<li><p>time-travel debugging</p></li>
</ul>
<p>much easier to implement correctly.</p>
</section>
<hr class="docutils" />
<section id="what-values-can-be-stored">
<h2>What values can be stored<a class="headerlink" href="#what-values-can-be-stored" title="Link to this heading">¶</a></h2>
<p>Values stored in slots must be:</p>
<ul class="simple">
<li><p>safely copyable, or</p></li>
<li><p>serializable</p></li>
</ul>
<p>SimpleAppState validates values on <strong>set</strong> and <strong>update</strong>
to ensure they are safe to store.</p>
<p>This prevents subtle bugs caused by
non-copyable or externally mutable objects.</p>
</section>
<hr class="docutils" />
<section id="this-may-feel-unfamiliar-at-first">
<h2>This may feel unfamiliar at first<a class="headerlink" href="#this-may-feel-unfamiliar-at-first" title="Link to this heading">¶</a></h2>
<p>If you are used to mutating objects directly,
this design may feel strict.</p>
<p>However, it has important benefits:</p>
<ul class="simple">
<li><p>fewer hidden bugs</p></li>
<li><p>clearer state flow</p></li>
<li><p>easier debugging</p></li>
<li><p>safer refactoring</p></li>
</ul>
<p>After some time, many developers find it
<em>more comfortable</em> than mutable state.</p>
</section>
<hr class="docutils" />
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Value semantics means:</p>
<ul class="simple">
<li><p>state is replaced, not mutated</p></li>
<li><p><strong>get()</strong> always returns a copy</p></li>
<li><p><strong>set</strong> and <strong>update</strong> are the only write paths</p></li>
<li><p>state changes are explicit and traceable</p></li>
</ul>
<p>Once you accept this rule,
SimpleAppState becomes much easier to understand.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">simple_app_state</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Core Concepts</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="simple_app_state.html">SimpleAppState</a></li>
<li class="toctree-l2"><a class="reference internal" href="state_slot.html">StateSlot</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Value Semantics</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_updates.html">Batch Updates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../state_models/index.html">State Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flutter_integration/index.html">Flutter Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../project_management_and_design/index.html">Project Management and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix/index.html">Appendix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notice.html">Notice</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Core Concepts</a><ul>
      <li>Previous: <a href="state_slot.html" title="previous chapter">StateSlot</a></li>
      <li>Next: <a href="batch_updates.html" title="next chapter">Batch Updates</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2026, Masahide Mori.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 9.1.0</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../_sources/core_concepts/value_semantics.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>